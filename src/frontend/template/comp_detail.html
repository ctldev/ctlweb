{% extends "base.html" %}
{% load i18n %}
{% block title %}
Component {{ component.name }}
{% endblock title %}
{% block content %}
<div class="transbox">
<div class="page-header">
  <h1>{{ component.name }} 
  </h1>  
  <blockquote>
  {{ component.brief_description  }}
  </blockquote>
</div> 
  <dl class="dl-horizontal">
	<dt>
	  {% blocktrans count counter=interfaces|length %}
		Interface:
	  {% plural %}
		Interfaces:
	  {% endblocktrans %}
	</dt>
	<dd>
	  {% for i in interfaces %}
		{{ i.name }}{% if not forloop.last %}, {% endif %}
	  {% endfor %}
	</dd>

	<dt>
	  {% blocktrans count counter=programmer|length %}
		Ersteller:
	  {% plural %}
		Ersteller:
	  {% endblocktrans %}
	</dt>
	<dd> 
	  {% for p in programmer %}
		{% if p in users.email %} 
		  {# url(-Algorithmus) nicht vorhanden #}
		  <a href="{% url user u.pk %}">
			{{ p.email }}
		  </a>{% else %}{{ p.email }}{% endif %}{% if not forloop.last %},
		  {% endif %}
		  <br /> 
	  {% endfor %} 
	</dd>
	
	<dt>
	  {% trans "Version:" %}
	</dt>
	<dd>
	  {{ component.version }}
	</dd>
  	
  	<dt>
	  {% trans "Datum:" %}
	</dt>
	<dd> 
	  {{ component.date }} 
	</dd>
</dl>

<div class="accordion" id="accordion2">
  <div class="accordion-group">
	<div class="accordion-heading">
	  <a 
		class="accordion-toggle" 
		data-toggle="collapse"
		data-parent="#accordion2" 
		href="#description"
	  >
		{% trans "Beschreibung" %}
	  </a>
	</div>
  <div id="description" class="accordion-body collapse">
	<div class="accordion-inner">
	  {{ component.description }}
	</div>
  </div>
  <script type="text/javascript">
	$(function() {
		$('.accordion').on('hide', function (e) {
		  $(this).find('.accordion-toggle').not($(e.target)).removeClass('active');
		  });
	});
  </script>
</div>
</div>

{% if see_homecluster %}
{% blocktrans count counter=homecluster|length %}
  Cluster:
{% plural %}
  Cluster:
{% endblocktrans %}
<div class="accordion" id="accordion1">
  <div class="accordion-group">
	{% for hc in homecluster %}
	  <div class="accordion-heading">
		<a 
		  class="accordion-toggle" 
		  data-toggle="collapse"
		  data-parent="#accordion1" 
		  href="#{{ hc.id }}"
		>
		{{ hc.domain }}
		</a>
	  </div>
	  {% if forloop.first %}
		<div id="{{ hc.id }}" class="accordion-body collapse in">
	  {% else %}
		<div id="{{ hc.id }}" class="accordion-body collapse">
	  {% endif %}
		<div class="accordion-inner">
		  {% for h in hc.components_cluster_set.all %}
			{% if h.component = component %}
			    <table>
				{% if user.is_authenticated %}
				  <tr>
				    <td>
					  {% trans "CTL-Befehl:" %}
				    </td>
				    <td>
					{{ h.ctl }}
				    </td>
				  </tr>
				{% endif %} 
				{% if see_path %}
				  <tr>
					<td> 
					  {% trans "Pfad:" %} 
					</td>
					<td> 
					  {{ h.path }} 
					</td>
				  </tr>
				{% endif %}
				{% if see_code %}
				  <tr>
					<td> 
					  {% trans "Code:" %}
					</td>
					<td> 
					  {{ h.code }} 
					</td>
				  </tr>
				{% endif %}
				{% if see_ssh_data %}
				  <tr>
					<td>
					  {% trans "SSH-Benutzer:" %}
					</td>
					<td>
					  {{ hc.username }}
					</td>
				  </tr>
				  <tr>
					<td>
					  {% trans "SSH-Port:" %}
					</td>
					<td>
					  {{ hc.port|default:22 }}
					</td>
				  </tr>
				{% endif %}
			  </table>
			{% endif %}
		  {% endfor %}
		</div>
	  </div>
	{% endfor %}
  </div>
</div>
{% endif %}
</div>
{% endblock content %}				
