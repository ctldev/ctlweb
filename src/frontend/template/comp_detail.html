{% extends "base.html" %}
{% block title %}
Component {{ component.name }}
{% endblock title %}
{% block content %}
<div class="transbox">
<div class="page-header">
  <h1>{{ component.name }} 
  </h1>
</div>
<table class="table table-condensed">
  <tr>
	<td>
	  {{ component.brief_description  }} 
	</td>
  </tr>
  <tr>
	<td>
	  Interface
	</td>
	<td>
	  {% for i in interfaces %}
		{{ i.name }}{% if not forloop.last %}, {% endif %}
	  {% endfor %}
	</td>
  </tr>
  <tr>
	<td>
	  Ersteller:
	  {# {% trans "Ersteller" %} #}
	</td>
	<td> 
	  {% for p in programmer %}
		{% if p in users.email %} 
		  {# url noch nicht vorhanden #}
		  <a href="{% url user u.pk %}">
			{{ p.email }}
		  </a>{% else %}{{ p.email }}{% endif %}{% if not forloop.last %},
		  {% endif %}
		  <br /> 
	  {% endfor %} 
	</td>
  </tr>
  <tr>
	<td>
	  Version:
	</td>
	<td>
	  {{ component.version }}
	</td>
  </tr>
  <tr>
	<td>
	  Vom: 
	  {# {% trans "Datum" %} #}
	</td>
	<td> 
	  {{ component.date }} 
	</td>
  </tr>
  {% if see_homeserver %}
  <tr>
	<td> 
	  Homeserver 
	</td>
	<td> 
	  {% for hs in homeserver %}
		<a href="{{ hs.domain }}">
		  {{ hs.name }}
		</a> 
		{% if not forloop.last %} <br /> {% endif %}
	  {% endfor %}
	</td>
  </tr>
  {% endif %}
</table>
<div class="accordion" id="accordion2">
  <div class="accordion-group">
	<div class="accordion-heading">
	  <a 
		class="accordion-toggle" 
		data-toggle="collapse"
		data-parent="#accordion2" 
		href="#description"
	  >
		Beschreibung
	  </a>
	</div>
  <div id="description" class="accordion-body collapse">
	<div class="accordion-inner">
	  {{ component.description }}
	</div>
  </div>
  <script type="text/javascript">
	$(function() {
		$('.accordion').on('hide', function (e) {
		  $(this).find('.accordion-toggle').not($(e.target)).removeClass('active');
		  });
	});
  </script>
</div>
</div>

{% if see_homecluster %}
Cluster:
<div class="accordion" id="accordion1">
  <div class="accordion-group">
	{% for hc in homecluster %}
	  <div class="accordion-heading">
		<a 
		  class="accordion-toggle" 
		  data-toggle="collapse"
		  data-parent="#accordion1" 
		  href="#{{ hc.id }}"
		>
		  {{ hc.name }} {{ hc.domain }}
		</a>
	  </div>
	  {% if forloop.first %}
		<div id="{{ hc.id }}" class="accordion-body collapse in">
	  {% else %}
		<div id="{{ hc.id }}" class="accordion-body collapse">
	  {% endif %}
		<div class="accordion-inner">
		  {% for h in hc.components_cluster_set.all %}
			{% if h.component = component %}
			  <table>
				{% if see_path %}
				  <tr>
					<td> 
					  Pfad: 
					</td>
					<td> 
					  {{ h.path }} 
					</td>
				  </tr>
				{% endif %}
				{% if see_code %}
				  <tr>
					<td> 
					  Code: 
					</td>
					<td> 
					  {{ h.code }} 
					</td>
				  </tr>
				{% endif %}
			  </table>
			{% endif %}
		  {% endfor %}
		</div>
	  </div>
	{% endfor %}
  </div>
</div>
{% endif %}
</div>
{% endblock content %}				
